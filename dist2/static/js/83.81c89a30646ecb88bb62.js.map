{"version":3,"sources":["webpack:///static/js/83.81c89a30646ecb88bb62.js","webpack:///./src/components/wx_user/qrcode.vue?f9ae","webpack:///./src/components/wx_user/qrcode.vue?8d45","webpack:///./src/components/wx_user/qrcode.vue?dec1","webpack:///./src/components/wx_user/qrcode.vue","webpack:///qrcode.vue"],"names":["webpackJsonp","1062","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","1208","content","locals","1420","render","_vm","this","_h","$createElement","_c","_self","staticClass","isBind","_e","_v","on","click","goBind","isSale","attrs","id","ref","staticRenderFns","334","injectStyle","ssrContext","Component","951","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__vuex_types__","__WEBPACK_IMPORTED_MODULE_1_mint_ui__","n","name","data","qrcode","salePhone","mounted","_this","getQueryObj","entry","queryObj","$route","query","console","log","message","duration","open","$store","dispatch","code","then","res","close","openid","sNSUserInfo","openId","sign","wXUserLibk","type","saleInfo","phone","wxShare","createQrCode","catch","err","methods","that","$","ajax","url","location","href","split","done","r","wx","config","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","sdata","title","desc","link","imgUrl","cancel","alert","onMenuShareTimeline","onMenuShareAppMessage","$router","replace","bindEntry","window","search","$1","$2","$3","_this2","$nextTick","width","document","body","clientWidth","QRCode","$refs","height","makeCode"],"mappings":"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","file":"static/js/83.81c89a30646ecb88bb62.js","sourcesContent":["webpackJsonp([83],{\n\n/***/ 1062:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(242)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".unbind-container[data-v-83e35344]{margin-top:30vh;padding:0 15vw;font-size:18px}.bindUser[data-v-83e35344]{color:#5db7e7;cursor:pointer;font-weight:900}.bindUser[data-v-83e35344]:hover{text-decoration:underline}.bind-container[data-v-83e35344]{margin-top:20vh;padding:0 15vw;font-size:18px;font-weight:900}.bind-container .qrcode-forbidden[data-v-83e35344]{white-space:nowrap}.qrcode-content[data-v-83e35344]{margin-top:-18vh}.text-title[data-v-83e35344]{font-weight:600;font-size:18px;text-align:left}.text-info[data-v-83e35344]{font-size:15px;text-align:left;margin-bottom:8px}\", \"\", {\"version\":3,\"sources\":[\"D:/yayiApp/src/components/wx_user/qrcode.vue\"],\"names\":[],\"mappings\":\"AACA,mCACE,gBAAiB,AACjB,eAAgB,AAChB,cAAgB,CACjB,AACD,2BACE,cAAe,AACf,eAAgB,AAChB,eAAiB,CAClB,AACD,iCACE,yBAA2B,CAC5B,AACD,iCACE,gBAAiB,AACjB,eAAgB,AAChB,eAAgB,AAChB,eAAiB,CAClB,AACD,mDACE,kBAAoB,CACrB,AACD,iCACE,gBAAkB,CACnB,AACD,6BACE,gBAAiB,AACjB,eAAgB,AAChB,eAAiB,CAClB,AACD,4BACE,eAAgB,AAChB,gBAAiB,AACjB,iBAAmB,CACpB\",\"file\":\"qrcode.vue\",\"sourcesContent\":[\"\\n.unbind-container[data-v-83e35344] {\\n  margin-top: 30vh;\\n  padding: 0 15vw;\\n  font-size: 18px;\\n}\\n.bindUser[data-v-83e35344] {\\n  color: #5db7e7;\\n  cursor: pointer;\\n  font-weight: 900;\\n}\\n.bindUser[data-v-83e35344]:hover {\\n  text-decoration: underline;\\n}\\n.bind-container[data-v-83e35344] {\\n  margin-top: 20vh;\\n  padding: 0 15vw;\\n  font-size: 18px;\\n  font-weight: 900;\\n}\\n.bind-container .qrcode-forbidden[data-v-83e35344] {\\n  white-space: nowrap;\\n}\\n.qrcode-content[data-v-83e35344] {\\n  margin-top: -18vh;\\n}\\n.text-title[data-v-83e35344] {\\n  font-weight: 600;\\n  font-size: 18px;\\n  text-align: left;\\n}\\n.text-info[data-v-83e35344] {\\n  font-size: 15px;\\n  text-align: left;\\n  margin-bottom: 8px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 1208:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1062);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(243)(\"629649f5\", content, true);\n\n/***/ }),\n\n/***/ 1420:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"qrcode-container\"\n  }, [(!_vm.isBind) ? _c('div', {\n    staticClass: \"unbind-container\"\n  }, [_vm._v(\"\\n    该模块只对“客服代表”开放~\\n    若您是客服代表，请先\\n    \"), _c('span', {\n    staticClass: \"bindUser\",\n    on: {\n      \"click\": _vm.goBind\n    }\n  }, [_vm._v(\"“绑定账号”\")])]) : _vm._e(), _vm._v(\" \"), (_vm.isBind) ? _c('div', {\n    staticClass: \"bind-container\"\n  }, [(!_vm.isSale) ? _c('div', {\n    staticClass: \"qrcode-forbidden\"\n  }, [_vm._v(\"\\n      抱歉，该模块只对客服代表开放~\\n    \")]) : _vm._e(), _vm._v(\" \"), (_vm.isSale) ? _c('div', {\n    staticClass: \"qrcode-content\",\n    attrs: {\n      \"id\": \"login_container\"\n    }\n  }, [_c('p', {\n    staticClass: \"text-info text-title\"\n  }, [_vm._v(\"\\n        绑定客户方法：\\n      \")]), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-info\"\n  }, [_vm._v(\" 方法1. 长按保存二维码图片并发送给客户，客户识别二维码然后注册绑定。\")]), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-info\"\n  }, [_vm._v(\" 方法2. 客户直接扫描该二维码，然后注册绑定。\")]), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-info\"\n  }, [_vm._v(\" 方法3. 点击右上角分享该链接给客户，客户点击链接然后注册绑定。\")]), _vm._v(\" \"), _c('div', {\n    ref: \"qrcode\",\n    staticClass: \"qrCode\"\n  })]) : _vm._e()]) : _vm._e()])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(1208)\n}\nvar Component = __webpack_require__(62)(\n  /* script */\n  __webpack_require__(951),\n  /* template */\n  __webpack_require__(1420),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-83e35344\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 951:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__vuex_types__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mint_ui__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_mint_ui__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vuex_util__ = __webpack_require__(111);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'qrcode',\n  data: function data() {\n    return {\n      isBind: false,\n      isSale: true,\n      qrcode: null,\n      salePhone: ''\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.getQueryObj();\n    //请求微信openid值和绑定信息\n    //扫码登录进来的\n    //      this.role = this.$route.query.role\n    //获得入口方式\n    this.entry = this.queryObj.entry || this.$route.query.entry;\n    console.log(this.entry, 'entry!!!!');\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_mint_ui__[\"Toast\"])({ message: '正在验证身份信息，请稍后', duration: 1000 });\n    __WEBPACK_IMPORTED_MODULE_1_mint_ui__[\"Indicator\"].open();\n    //请求微信openid值和绑定信息\n    this.$store.dispatch(__WEBPACK_IMPORTED_MODULE_0__vuex_types__[\"f\" /* GET_USER_WX_STATE */], { code: this.queryObj.code }).then(function (res) {\n      __WEBPACK_IMPORTED_MODULE_1_mint_ui__[\"Indicator\"].close();\n      //获取openId\n      _this.openid = res.data.sNSUserInfo.openId;\n      //表示微信已经和用户绑定\n      if (+res.data.sNSUserInfo.sign === 1) _this.isBind = true;\n      //从查询字符串中获取到entry\n      if (_this.isBind) {\n        //判断角色的两种doctor和sale\n        if (+res.data.wXUserLibk.type === 1) _this.isSale = false;\n        if (+res.data.wXUserLibk.type === 2) _this.isSale = true;\n      }\n      if (!_this.isSale) return;\n      _this.salePhone = res.data.saleInfo.phone;\n      _this.wxShare();\n      _this.createQrCode();\n    }).catch(function (err) {\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_mint_ui__[\"Toast\"])({ message: '请稍后', duration: 3000 });\n    });\n  },\n\n  methods: {\n    wxShare: function wxShare() {\n      var that = this;\n      $.ajax({\n        url: 'http://47.93.48.111:6181/api/weixin/share', // 此处url请求地址需要替换成你自己实际项目中服务器数字签名服务地址\n        type: 'post',\n        data: {\n          url: location.href.split('#')[0] // 将当前URL地址上传至服务器用于产生数字签名\n        }\n      }).done(function (res) {\n        // console.log(location.href.split('#')[0],'url')\n        var r = res.data;\n        // 开始配置微信JS-SDK\n        wx.config({\n          debug: false,\n          appId: r.appId,\n          timestamp: r.timestamp,\n          nonceStr: r.nonceStr,\n          signature: r.signature,\n          jsApiList: ['checkJsApi', 'onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'hideMenuItems', 'chooseImage']\n        });\n        wx.ready(function () {\n          var sdata = {\n            title: '牙医abc',\n            desc: that.salePhone + '邀请您绑定牙医abc账号~',\n            link: 'http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state=' + that.salePhone + '&redirect_uri=http%3a%2f%2fwap.yayiabc.com%2f%23%2fwx_user',\n            imgUrl: 'http://oqhy88nu6.bkt.clouddn.com/loading1.png',\n            //              success: function () {\n            //                alert('分享成功 :)');\n            //              },\n            cancel: function cancel() {\n              alert('分享出错 :(');\n            }\n          };\n          wx.onMenuShareTimeline(sdata);\n          wx.onMenuShareAppMessage(sdata);\n        });\n      });\n    },\n    goBind: function goBind() {\n      //todo 微信的绑定账号的链接\n      console.log(this.openid);\n      //        window.location('http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state=123&redirect_uri=http%3a%2f%2fwww.yayiabc.com%3a99')\n      this.$router.replace({\n        name: \"wx_user\", query: { bindEntry: 'qrcode', openid: this.openid }\n      });\n    },\n\n    //获取查询自符串并保存到bindInfo对象中\n    getQueryObj: function getQueryObj() {\n      //获取为网页查询字符串\n      var queryObj = {};\n      var query = window.location.search.split('?')[1] || '';\n      query.replace(/(\\w+)=(\\w*)/g, function ($1, $2, $3) {\n        queryObj[$2] = $3;\n      });\n      this.queryObj = queryObj;\n    },\n\n    //生成二维码\n    createQrCode: function createQrCode() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        var width = document.body.clientWidth;\n        _this2.qrcode = new _this2.QRCode(_this2.$refs.qrcode, {\n          width: width * 0.7,\n          height: width * 0.7\n        });\n        _this2.qrcode.makeCode('http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state=' + _this2.salePhone + '&redirect_uri=http%3a%2f%2fwww.yayiabc.com%3a99%2f%23%2fwx_user');\n      });\n    }\n  }\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/83.81c89a30646ecb88bb62.js","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".unbind-container[data-v-83e35344]{margin-top:30vh;padding:0 15vw;font-size:18px}.bindUser[data-v-83e35344]{color:#5db7e7;cursor:pointer;font-weight:900}.bindUser[data-v-83e35344]:hover{text-decoration:underline}.bind-container[data-v-83e35344]{margin-top:20vh;padding:0 15vw;font-size:18px;font-weight:900}.bind-container .qrcode-forbidden[data-v-83e35344]{white-space:nowrap}.qrcode-content[data-v-83e35344]{margin-top:-18vh}.text-title[data-v-83e35344]{font-weight:600;font-size:18px;text-align:left}.text-info[data-v-83e35344]{font-size:15px;text-align:left;margin-bottom:8px}\", \"\", {\"version\":3,\"sources\":[\"D:/yayiApp/src/components/wx_user/qrcode.vue\"],\"names\":[],\"mappings\":\"AACA,mCACE,gBAAiB,AACjB,eAAgB,AAChB,cAAgB,CACjB,AACD,2BACE,cAAe,AACf,eAAgB,AAChB,eAAiB,CAClB,AACD,iCACE,yBAA2B,CAC5B,AACD,iCACE,gBAAiB,AACjB,eAAgB,AAChB,eAAgB,AAChB,eAAiB,CAClB,AACD,mDACE,kBAAoB,CACrB,AACD,iCACE,gBAAkB,CACnB,AACD,6BACE,gBAAiB,AACjB,eAAgB,AAChB,eAAiB,CAClB,AACD,4BACE,eAAgB,AAChB,gBAAiB,AACjB,iBAAmB,CACpB\",\"file\":\"qrcode.vue\",\"sourcesContent\":[\"\\n.unbind-container[data-v-83e35344] {\\n  margin-top: 30vh;\\n  padding: 0 15vw;\\n  font-size: 18px;\\n}\\n.bindUser[data-v-83e35344] {\\n  color: #5db7e7;\\n  cursor: pointer;\\n  font-weight: 900;\\n}\\n.bindUser[data-v-83e35344]:hover {\\n  text-decoration: underline;\\n}\\n.bind-container[data-v-83e35344] {\\n  margin-top: 20vh;\\n  padding: 0 15vw;\\n  font-size: 18px;\\n  font-weight: 900;\\n}\\n.bind-container .qrcode-forbidden[data-v-83e35344] {\\n  white-space: nowrap;\\n}\\n.qrcode-content[data-v-83e35344] {\\n  margin-top: -18vh;\\n}\\n.text-title[data-v-83e35344] {\\n  font-weight: 600;\\n  font-size: 18px;\\n  text-align: left;\\n}\\n.text-info[data-v-83e35344] {\\n  font-size: 15px;\\n  text-align: left;\\n  margin-bottom: 8px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-83e35344\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/components/wx_user/qrcode.vue\n// module id = 1062\n// module chunks = 83","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-83e35344\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./qrcode.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"629649f5\", content, true);\n\n\n// WEBPACK FOOTER //\n// \"}!./~/_vue-style-loader@3.0.3@vue-style-loader!./~/_css-loader@0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-83e35344\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/components/wx_user/qrcode.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"qrcode-container\"\n  }, [(!_vm.isBind) ? _c('div', {\n    staticClass: \"unbind-container\"\n  }, [_vm._v(\"\\n    该模块只对“客服代表”开放~\\n    若您是客服代表，请先\\n    \"), _c('span', {\n    staticClass: \"bindUser\",\n    on: {\n      \"click\": _vm.goBind\n    }\n  }, [_vm._v(\"“绑定账号”\")])]) : _vm._e(), _vm._v(\" \"), (_vm.isBind) ? _c('div', {\n    staticClass: \"bind-container\"\n  }, [(!_vm.isSale) ? _c('div', {\n    staticClass: \"qrcode-forbidden\"\n  }, [_vm._v(\"\\n      抱歉，该模块只对客服代表开放~\\n    \")]) : _vm._e(), _vm._v(\" \"), (_vm.isSale) ? _c('div', {\n    staticClass: \"qrcode-content\",\n    attrs: {\n      \"id\": \"login_container\"\n    }\n  }, [_c('p', {\n    staticClass: \"text-info text-title\"\n  }, [_vm._v(\"\\n        绑定客户方法：\\n      \")]), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-info\"\n  }, [_vm._v(\" 方法1. 长按保存二维码图片并发送给客户，客户识别二维码然后注册绑定。\")]), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-info\"\n  }, [_vm._v(\" 方法2. 客户直接扫描该二维码，然后注册绑定。\")]), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-info\"\n  }, [_vm._v(\" 方法3. 点击右上角分享该链接给客户，客户点击链接然后注册绑定。\")]), _vm._v(\" \"), _c('div', {\n    ref: \"qrcode\",\n    staticClass: \"qrCode\"\n  })]) : _vm._e()]) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-83e35344\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/wx_user/qrcode.vue\n// module id = 1420\n// module chunks = 83","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-83e35344\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./qrcode.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./qrcode.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-83e35344\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./qrcode.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-83e35344\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/wx_user/qrcode.vue\n// module id = 334\n// module chunks = 83","<template>\r\n  <div class=\"qrcode-container\">\r\n    <div class=\"unbind-container\" v-if=\"!isBind\">\r\n      该模块只对“客服代表”开放~\r\n      若您是客服代表，请先\r\n      <span @click=\"goBind\" class=\"bindUser\">“绑定账号”</span>\r\n    </div>\r\n    <div class=\"bind-container\" v-if=\"isBind\">\r\n      <div class=\"qrcode-forbidden\" v-if=\"!isSale\">\r\n        抱歉，该模块只对客服代表开放~\r\n      </div>\r\n      <div class=\"qrcode-content\" id=\"login_container\" v-if=\"isSale\">\r\n        <p class=\"text-info text-title\">\r\n          绑定客户方法：\r\n        </p>\r\n        <p class=\"text-info\"> 方法1. 长按保存二维码图片并发送给客户，客户识别二维码然后注册绑定。</p>\r\n        <p class=\"text-info\"> 方法2. 客户直接扫描该二维码，然后注册绑定。</p>\r\n        <p class=\"text-info\"> 方法3. 点击右上角分享该链接给客户，客户点击链接然后注册绑定。</p>\r\n        <div class=\"qrCode\" ref=\"qrcode\"></div>\r\n        <!--todo 生成二维码-->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  import {GET_USER_WX_STATE} from '../../vuex/types'\r\n  import {Toast, Indicator} from 'mint-ui'\r\n  import {tokenMethods} from '../../vuex/util'\r\n\r\n  export default {\r\n    name: 'qrcode',\r\n    data() {\r\n      return {\r\n        isBind: false,\r\n        isSale: true,\r\n        qrcode: null,\r\n        salePhone: '',\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getQueryObj()\r\n      //请求微信openid值和绑定信息\r\n      //扫码登录进来的\r\n//      this.role = this.$route.query.role\r\n      //获得入口方式\r\n      this.entry = this.queryObj.entry || this.$route.query.entry\r\n      console.log(this.entry, 'entry!!!!')\r\n      Toast({message: '正在验证身份信息，请稍后', duration: 1000})\r\n      Indicator.open()\r\n      //请求微信openid值和绑定信息\r\n      this.$store.dispatch(GET_USER_WX_STATE, {code: this.queryObj.code})\r\n        .then(res => {\r\n          Indicator.close()\r\n          //获取openId\r\n          this.openid = res.data.sNSUserInfo.openId\r\n          //表示微信已经和用户绑定\r\n          if (+res.data.sNSUserInfo.sign === 1) this.isBind = true\r\n          //从查询字符串中获取到entry\r\n          if (this.isBind) {\r\n            //判断角色的两种doctor和sale\r\n            if (+res.data.wXUserLibk.type === 1) this.isSale = false\r\n            if (+res.data.wXUserLibk.type === 2) this.isSale = true\r\n          }\r\n          if (!this.isSale) return\r\n          this.salePhone = res.data.saleInfo.phone\r\n          this.wxShare()\r\n          this.createQrCode()\r\n        })\r\n        .catch(err => {\r\n          Toast({message: '请稍后', duration: 3000})\r\n        })\r\n    },\r\n    methods: {\r\n      wxShare() {\r\n        var that = this\r\n        $.ajax({\r\n          url: 'http://47.93.48.111:6181/api/weixin/share',// 此处url请求地址需要替换成你自己实际项目中服务器数字签名服务地址\r\n          type: 'post',\r\n          data: {\r\n            url: location.href.split('#')[0] // 将当前URL地址上传至服务器用于产生数字签名\r\n          }\r\n        }).done(function (res) {\r\n          // console.log(location.href.split('#')[0],'url')\r\n          var r = res.data\r\n          // 开始配置微信JS-SDK\r\n          wx.config({\r\n            debug: false,\r\n            appId: r.appId,\r\n            timestamp: r.timestamp,\r\n            nonceStr: r.nonceStr,\r\n            signature: r.signature,\r\n            jsApiList: [\r\n              'checkJsApi',\r\n              'onMenuShareTimeline',\r\n              'onMenuShareAppMessage',\r\n              'onMenuShareQQ',\r\n              'onMenuShareWeibo',\r\n              'hideMenuItems',\r\n              'chooseImage'\r\n            ]\r\n          });\r\n          wx.ready(function () {\r\n            var sdata = {\r\n              title: '牙医abc',\r\n              desc: that.salePhone + '邀请您绑定牙医abc账号~',\r\n              link: `http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state=${that.salePhone}&redirect_uri=http%3a%2f%2fwap.yayiabc.com%2f%23%2fwx_user`,\r\n              imgUrl: 'http://oqhy88nu6.bkt.clouddn.com/loading1.png',\r\n//              success: function () {\r\n//                alert('分享成功 :)');\r\n//              },\r\n              cancel: function () {\r\n                alert('分享出错 :(');\r\n              }\r\n            };\r\n            wx.onMenuShareTimeline(sdata);\r\n            wx.onMenuShareAppMessage(sdata);\r\n          });\r\n        })\r\n      },\r\n      goBind() {\r\n        //todo 微信的绑定账号的链接\r\n        console.log(this.openid)\r\n//        window.location('http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state=123&redirect_uri=http%3a%2f%2fwww.yayiabc.com%3a99')\r\n        this.$router.replace({\r\n          name: \"wx_user\", query: {bindEntry: 'qrcode', openid: this.openid}\r\n        })\r\n      },\r\n      //获取查询自符串并保存到bindInfo对象中\r\n      getQueryObj() {\r\n        //获取为网页查询字符串\r\n        let queryObj = {}\r\n        let query = window.location.search.split('?')[1] || ''\r\n        query.replace(/(\\w+)=(\\w*)/g, ($1, $2, $3) => {\r\n          queryObj[$2] = $3\r\n        })\r\n        this.queryObj = queryObj\r\n      },\r\n      //生成二维码\r\n      createQrCode() {\r\n        this.$nextTick(() => {\r\n          let width = document.body.clientWidth\r\n          this.qrcode = new this.QRCode(this.$refs.qrcode, {\r\n            width: width * 0.7,\r\n            height: width * 0.7\r\n          })\r\n          this.qrcode.makeCode(`http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state=${this.salePhone}&redirect_uri=http%3a%2f%2fwww.yayiabc.com%3a99%2f%23%2fwx_user`)\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .unbind-container {\r\n    margin-top: 30vh;\r\n    padding: 0 15vw;\r\n    font-size: 18px;\r\n  }\r\n\r\n  .bindUser {\r\n    color: #5db7e7;\r\n    cursor: pointer;\r\n    font-weight: 900;\r\n  }\r\n\r\n  .bindUser:hover {\r\n    text-decoration: underline;\r\n  }\r\n\r\n  .bind-container {\r\n    margin-top: 20vh;\r\n    padding: 0 15vw;\r\n    font-size: 18px;\r\n    font-weight: 900;\r\n  }\r\n\r\n  .bind-container .qrcode-forbidden {\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .qrcode-content {\r\n    margin-top: -18vh;\r\n  }\r\n\r\n  .text-title {\r\n    font-weight: 600;\r\n    font-size: 18px;\r\n    text-align: left;\r\n  }\r\n\r\n  .text-info {\r\n    font-size: 15px;\r\n    text-align: left;\r\n    margin-bottom: 8px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// qrcode.vue?0945fcea"],"sourceRoot":""}