webpackJsonp([82],{1133:function(e,t,n){var o=n(987);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(243)("7c05a6c4",o,!0)},1359:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-container"},[n("div",{staticClass:"content"},[n("router-view")],1)])},staticRenderFns:[]}},335:function(e,t,n){function o(e){n(1133)}var s=n(62)(n(952),n(1359),o,"data-v-263ef3ca",null);e.exports=s.exports},952:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),s=(n.n(o),n(111)),i=n(35);t.default={name:"wx_user",data:function(){return{state:0,queryObj:{},openid:"",phone:"",isBindSale:!1,isBind:!1,role:"",entry:"",_salePhone:"",saleName:""}},methods:{goChildrenRoute:function(e){var t=this,s=function(e){t.$router.replace(e)};switch(!0){case e:s({path:"/wx_user/bindinfo",query:{role:this.role,phone:this.phone,salePhone:this.salePhone||this._salePhone,isBindSale:this.isBindSale,entry:this.entry,token:this.token,saleName:this.saleName}});break;case!e:s({path:"/wx_user/userBindWx",query:{role:this.role,openid:this.openid,entry:this.entry,salePhone:this.salePhone||this._salePhone}});break;default:n.i(o.Toast)({message:"登录失败请稍后重试！",duration:3e3})}},initQrcode:function(){11===this.queryObj.state.length&&"qrcode"!==this.$route.query.bindEntry&&(this.entry="qrcode",this._salePhone=this.queryObj.state.toString())},getQueryObj:function(){var e={};(window.location.search.split("?")[1]||"").replace(/(\w+)=(\w*)/g,function(t,n,o){e[n]=o}),this.queryObj=e}},created:function(){var e=this;n.i(o.Toast)({message:"正在验证身份信息，请稍后",duration:1e3}),this.getQueryObj(),this.initQrcode(),console.info("user组件中的query",this.$route.query),"qrcode"===this.$route.query.bindEntry?(this.entry="",this.openid=this.$route.query.openid,console.log(this.openid),this.goChildrenRoute(this.isBind)):(o.Indicator.open(),this.$store.dispatch(i.f,{code:this.queryObj.code}).then(function(t){if(o.Indicator.close(),e.openid=t.data.sNSUserInfo.openId,1==+t.data.sNSUserInfo.sign&&(e.isBind=!0),e.isBind){1==+t.data.wXUserLibk.type&&(e.role="doctor"),2==+t.data.wXUserLibk.type&&(e.role="sale");var n=t.data.user;n&&n.saleinfo&&(e.isBindSale=!0),n&&n.saleinfo&&(e.saleName=n.saleinfo.trueName||"未知"),n&&(e.salePhone=n.saleinfo&&n.saleinfo.phone,e.phone=n.phone),"sale"===e.role&&(e.phone=t.data.saleInfo.phone),s.a.setToken(t.token),e.token=t.token}e.goChildrenRoute(e.isBind)}).catch(function(e){n.i(o.Toast)({message:"身份验证出现问题，请稍后",duration:3e3}),console.log(e)}))},mounted:function(){}}},987:function(e,t,n){t=e.exports=n(242)(!0),t.push([e.i,".user-container[data-v-263ef3ca]{position:relative}.content[data-v-263ef3ca]{margin-top:6vh}","",{version:3,sources:["D:/yayiApp/src/components/wx_user/user.vue"],names:[],mappings:"AACA,iCACE,iBAAmB,CACpB,AACD,0BACE,cAAgB,CACjB",file:"user.vue",sourcesContent:["\n.user-container[data-v-263ef3ca] {\n  position: relative;\n}\n.content[data-v-263ef3ca] {\n  margin-top: 6vh;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=82.d7a9c11eee4dd2d79d78.js.map