webpackJsonp([83],{1062:function(e,n,t){n=e.exports=t(242)(!0),n.push([e.i,".unbind-container[data-v-83e35344]{margin-top:30vh;padding:0 15vw;font-size:18px}.bindUser[data-v-83e35344]{color:#5db7e7;cursor:pointer;font-weight:900}.bindUser[data-v-83e35344]:hover{text-decoration:underline}.bind-container[data-v-83e35344]{margin-top:20vh;padding:0 15vw;font-size:18px;font-weight:900}.bind-container .qrcode-forbidden[data-v-83e35344]{white-space:nowrap}.qrcode-content[data-v-83e35344]{margin-top:-18vh}.text-title[data-v-83e35344]{font-weight:600;font-size:18px;text-align:left}.text-info[data-v-83e35344]{font-size:15px;text-align:left;margin-bottom:8px}","",{version:3,sources:["D:/yayiApp/src/components/wx_user/qrcode.vue"],names:[],mappings:"AACA,mCACE,gBAAiB,AACjB,eAAgB,AAChB,cAAgB,CACjB,AACD,2BACE,cAAe,AACf,eAAgB,AAChB,eAAiB,CAClB,AACD,iCACE,yBAA2B,CAC5B,AACD,iCACE,gBAAiB,AACjB,eAAgB,AAChB,eAAgB,AAChB,eAAiB,CAClB,AACD,mDACE,kBAAoB,CACrB,AACD,iCACE,gBAAkB,CACnB,AACD,6BACE,gBAAiB,AACjB,eAAgB,AAChB,eAAiB,CAClB,AACD,4BACE,eAAgB,AAChB,gBAAiB,AACjB,iBAAmB,CACpB",file:"qrcode.vue",sourcesContent:["\n.unbind-container[data-v-83e35344] {\n  margin-top: 30vh;\n  padding: 0 15vw;\n  font-size: 18px;\n}\n.bindUser[data-v-83e35344] {\n  color: #5db7e7;\n  cursor: pointer;\n  font-weight: 900;\n}\n.bindUser[data-v-83e35344]:hover {\n  text-decoration: underline;\n}\n.bind-container[data-v-83e35344] {\n  margin-top: 20vh;\n  padding: 0 15vw;\n  font-size: 18px;\n  font-weight: 900;\n}\n.bind-container .qrcode-forbidden[data-v-83e35344] {\n  white-space: nowrap;\n}\n.qrcode-content[data-v-83e35344] {\n  margin-top: -18vh;\n}\n.text-title[data-v-83e35344] {\n  font-weight: 600;\n  font-size: 18px;\n  text-align: left;\n}\n.text-info[data-v-83e35344] {\n  font-size: 15px;\n  text-align: left;\n  margin-bottom: 8px;\n}\n"],sourceRoot:""}])},1208:function(e,n,t){var i=t(1062);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(243)("629649f5",i,!0)},1420:function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"qrcode-container"},[e.isBind?e._e():t("div",{staticClass:"unbind-container"},[e._v("\n    该模块只对“客服代表”开放~\n    若您是客服代表，请先\n    "),t("span",{staticClass:"bindUser",on:{click:e.goBind}},[e._v("“绑定账号”")])]),e._v(" "),e.isBind?t("div",{staticClass:"bind-container"},[e.isSale?e._e():t("div",{staticClass:"qrcode-forbidden"},[e._v("\n      抱歉，该模块只对客服代表开放~\n    ")]),e._v(" "),e.isSale?t("div",{staticClass:"qrcode-content",attrs:{id:"login_container"}},[t("p",{staticClass:"text-info text-title"},[e._v("\n        绑定客户方法：\n      ")]),e._v(" "),t("p",{staticClass:"text-info"},[e._v(" 方法1. 长按保存二维码图片并发送给客户，客户识别二维码然后注册绑定。")]),e._v(" "),t("p",{staticClass:"text-info"},[e._v(" 方法2. 客户直接扫描该二维码，然后注册绑定。")]),e._v(" "),t("p",{staticClass:"text-info"},[e._v(" 方法3. 点击右上角分享该链接给客户，客户点击链接然后注册绑定。")]),e._v(" "),t("div",{ref:"qrcode",staticClass:"qrCode"})]):e._e()]):e._e()])},staticRenderFns:[]}},334:function(e,n,t){function i(e){t(1208)}var a=t(62)(t(951),t(1420),i,"data-v-83e35344",null);e.exports=a.exports},951:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(35),a=t(24);t.n(a),t(111);n.default={name:"qrcode",data:function(){return{isBind:!1,isSale:!0,qrcode:null,salePhone:""}},mounted:function(){var e=this;this.getQueryObj(),this.entry=this.queryObj.entry||this.$route.query.entry,console.log(this.entry,"entry!!!!"),t.i(a.Toast)({message:"正在验证身份信息，请稍后",duration:1e3}),a.Indicator.open(),this.$store.dispatch(i.f,{code:this.queryObj.code}).then(function(n){a.Indicator.close(),e.openid=n.data.sNSUserInfo.openId,1==+n.data.sNSUserInfo.sign&&(e.isBind=!0),e.isBind&&(1==+n.data.wXUserLibk.type&&(e.isSale=!1),2==+n.data.wXUserLibk.type&&(e.isSale=!0)),e.isSale&&(e.salePhone=n.data.saleInfo.phone,e.wxShare(),e.createQrCode())}).catch(function(e){t.i(a.Toast)({message:"请稍后",duration:3e3})})},methods:{wxShare:function(){var e=this;$.ajax({url:"http://47.93.48.111:6181/api/weixin/share",type:"post",data:{url:location.href.split("#")[0]}}).done(function(n){var t=n.data;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","chooseImage"]}),wx.ready(function(){var n={title:"牙医abc",desc:e.salePhone+"邀请您绑定牙医abc账号~",link:"http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state="+e.salePhone+"&redirect_uri=http%3a%2f%2fwap.yayiabc.com%2f%23%2fwx_user",imgUrl:"http://oqhy88nu6.bkt.clouddn.com/loading1.png",cancel:function(){alert("分享出错 :(")}};wx.onMenuShareTimeline(n),wx.onMenuShareAppMessage(n)})})},goBind:function(){console.log(this.openid),this.$router.replace({name:"wx_user",query:{bindEntry:"qrcode",openid:this.openid}})},getQueryObj:function(){var e={};(window.location.search.split("?")[1]||"").replace(/(\w+)=(\w*)/g,function(n,t,i){e[t]=i}),this.queryObj=e},createQrCode:function(){var e=this;this.$nextTick(function(){var n=document.body.clientWidth;e.qrcode=new e.QRCode(e.$refs.qrcode,{width:.7*n,height:.7*n}),e.qrcode.makeCode("http://www.yayiabc.com/get-weixin-code.html?appid=wx4b1a6fde77626a32&scope=snsapi_userinfo&state="+e.salePhone+"&redirect_uri=http%3a%2f%2fwww.yayiabc.com%3a99%2f%23%2fwx_user")})}}}}});
//# sourceMappingURL=83.81c89a30646ecb88bb62.js.map